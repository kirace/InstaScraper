<?php
require '../../../autoload.php';
include('../examples/simple_html_dom.php');

date_default_timezone_set('America/New_York');

$instagram = \InstagramScraper\Instagram::withCredentials('kevin_irace', 'elite,,p');
$instagram->login();
sleep(2); // Delay to mimic user

$username = 'innovativegroupagency';
$followers = [];
$account = $instagram->getAccount($username);
sleep(1);
$followers = $instagram->getFollowers($account->getId(), 1000, 100, true); // Get 1000 followers of 'kevin', 100 a time with random delay between requests
echo json_encode($followers, JSON_PRETTY_PRINT);
/*$usernames = [];

for($i = 0; $i < count($followers); $i++){
  $usernames[] = $followers[$i]['username'];
}*/
//echo json_encode($usernames, JSON_PRETTY_PRINT);

//file_put_contents('followers.csv', implode(', ', $usernames));

//$output = shell_exec('python3 /Users/kevinirace/Downloads/instagram-scraper-master/instagram_scraper/app.py -f /Users/kevinirace/vendor/raiym/instagram-php-scraper/examples/followers.csv');
//echo $output;


?>
